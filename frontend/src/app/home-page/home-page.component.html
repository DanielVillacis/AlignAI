<div class="content">
  <div class="grid-container">
    <!-- Top row with two sections -->
    <div class="overview-section">
      <h1 class="section-title">Overview</h1>
      <div class="overview-content">
        <!-- Add overview content here -->
        <div class="chart-container">
          <apx-chart
            [series]="series"
            [chart]="chart"
            [xaxis]="xaxis"
            [stroke]="stroke"
            [dataLabels]="dataLabels"
            [yaxis]="yaxis"
            [labels]="labels"
            [legend]="legend"
            [colors]="colors"
            [fill]="fill"
            [grid]="grid">
          </apx-chart>
        </div>
      </div>
    </div>
    
    <div class="schedule-section">
      <h1 class="section-title">Schedule</h1>
      <div class="schedule-content">
        <div class="calendar-container">
          <!-- Calendar on the left -->
          <mat-calendar 
            class="schedule-calendar"
            (selectedChange)="onDateSelected($event)">
          </mat-calendar>
          
          <!-- Events display on the right -->
          <div class="schedule-details">
            <div class="event-header">
              <h2 *ngIf="selectedDate">
                Events for {{ selectedDate | date:'mediumDate' }}
              </h2>
              <button *ngIf="selectedDate" class="add-event-btn" (click)="openEventDialog()">
                + Add Event
              </button>
            </div>
            
            <!-- Events list -->
            <div class="events-list" *ngIf="selectedDate">
              <p *ngIf="isLoading">Loading events...</p>
              <p *ngIf="!isLoading && scheduledEvents.length === 0">No events scheduled for this date.</p>
              
              <div *ngFor="let event of scheduledEvents" class="event-card">
                <div class="event-header">
                  <h3>{{ event.title }}</h3>
                  <div class="event-actions">
                    <button class="delete-btn" (click)="deleteEvent(event.id)">Delete</button>
                  </div>
                </div>
                <p class="event-time">{{ event.event_date | date:'shortTime' }}</p>
                <p *ngIf="event.description" class="event-desc">{{ event.description }}</p>
                <p *ngIf="event.client_name" class="event-client">
                  Patient: {{ event.client_name }}
                </p>
                <span *ngIf="event.is_scan" class="event-tag">Scan</span>
              </div>
            </div>
            
            <p *ngIf="!selectedDate">Select a date to view scheduled events</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Bottom section with recent scans -->
    <div class="scans-section">
      <h1 class="section-title">Recent Scans</h1>
      <div class="client-list" *ngIf="scans.length; else noScans">
        <table>
          <thead>
            <tr>
              <th>Visit No.</th>
              <th>Patient Name</th>
              <th>Date</th>
              <th>Age</th>
              <th>Reason</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let scan of scans">
              <td>{{ scan.id }}</td>
              <td>{{ scan.client_full_name }}</td>
              <td>{{ scan.scan_date }}</td>
              <td>{{ scan.client_age }}</td>
              <td><span>{{ scan.scan_reason }}</span></td>
            </tr>
          </tbody>
        </table>
      </div>
      <ng-template #noScans>
        <p>No Scans found.</p>
      </ng-template>
    </div>
  </div>
</div>